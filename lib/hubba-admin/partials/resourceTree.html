<div ng-controller="childResourceCtrl" class="resource-row">
    <span ng-class="{ 'orange-text':child.id == hubba.selectedResource.id, 'fa-caret-down': hasChildren(child.children) && child.expanded, 'fa-caret-right': hasChildren(child.children) && !child.expanded, 'no-children': !hasChildren(child.children) }" ng-click="child.expanded=!child.expanded" class="fa tree-toggle"></span>
    <div class="btn-group">
        <a class="btn btn-link" ng-class="{'orange-text':child.id == hubba.selectedResource.id}" href="/hubba-admin/resources/{{child.id}}?page=config">/{{child.name}}</a>
        <a class="btn btn-link btn-sm dropdown-toggle" ng-class="{'btn-primary':child.id == hubba.selectedResource.id}" data-toggle="dropdown">
            <span class="fa fa-caret-square-o-down" ng-class="{'orange-text':child.id == hubba.selectedResource.id}"></span>
        </a>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/hubba-admin/resources/{{child.id}}?page=config">Config</a></li>
            <li><a href="/hubba-admin/resources/{{child.id}}?page=security">Security</a></li>
            <li><a href="/hubba-admin/resources/{{child.id}}?page=docs">Docs</a></li>
            <li ng-if="child.type === 'area' || child.type === 'controller'" class="divider"></li>
            <li ng-if="child.type === 'area'"><a href="#" ng-click="addChild(child);child.expanded=true;">Add child</a></li>
            <li ng-if="child.type === 'controller'" ng-repeat="verb in ['GET','POST','PUT','PATCH','DELETE']"><a href="/hubba-admin/resources/{{child.id}}?page={{verb}}">{{verb}}</a></li>
            <li class="divider"></li>
            <li><a href="#" ng-click="hubba.resources.del(child.id);">Delete Resource</a></li>
        </ul>
    </div>
    <ul ng-if="hasChildren(child.children)" ng-show="child.expanded" class="resource-child-list">
        <li ng-repeat="(key,child) in child.children">
            <ng-include src="'/hubba-admin/partials/resourceTree.html'"></ng-include>
        </li>
    </ul>
</div>