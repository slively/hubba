<div id="resources" class="col-lg-3">
	<ul>
		<li>
			<div class="child" ng-controller="childResourceCtrl">
				<div class="btn-group">
					<a class="btn btn-default btn-sm" ng-class="{'btn-primary':resourcesRoot.id == hubba.selectedResource.id}" href="/hubba-admin/resources/{{resourcesRoot.id}}">/{{resourcesRoot.name}}</a>
					<button type="button" class="btn btn-default btn-sm dropdown-toggle" ng-class="{'btn-primary':resourcesRoot.id == hubba.selectedResource.id}" data-toggle="dropdown">
				  		<span class="caret"></span>
					</button>
				  	<ul class="dropdown-menu" role="menu">
				    	<li><a href="#" ng-click="addChild(resourcesRoot)">Add child</a></li>
				    	<li class="divider"></li>
				    	<li><a href="#">Separated link</a></li>
				  	</ul>
				</div>
			</div>
			<ul>
				<li ng-repeat="(key,child) in resourcesRoot.children">
					<ng-include src="'/hubba-admin/partials/resourceTree.html'"></ng-include>
				</li>
			</ul>
		</li>
	</ul>
</div>
	
<div id="resourcePane" class="col-lg-9" ng-if="hubba.selectedResource.id">
	
	<ul class="nav nav-tabs" id="myTab">
	  	<li ng-class="{active:hubba.$route.params.page == 'config'}"><a href="{{hubba.selectedResource.id}}?page=config">Config</a></li>
        <li ng-class="{active:hubba.$route.params.page == 'security'}"><a href="{{hubba.selectedResource.id}}?page=security">Security</a></li>
        <li ng-class="{active:hubba.$route.params.page == 'docs'}"><a href="{{hubba.selectedResource.id}}?page=docs">Docs</a></li>

		<!--<li ng-class="{active:hubba.$route.params.page == verb, disabled: !hasVerb(verb)}" ng-repeat="verb in ['GET','POST','PUT','PATCH','DELETE','HEAD']">
			<a ng-if="hasVerb(verb)" href="{{hubba.selectedResource.id}}?page={{verb}}" ng-click="determineResourceUrl(hubba.selectedResource);">{{verb}}</a>
			<a ng-if="!hasVerb(verb)" href="">{{verb}}</a>
		</li>-->
	</ul>

	<div class="tab-pane">
		
		<div id="resource-link" class="">
			<a class="accordion-toggle" ng-click="test.expanded=!test.expanded;" title="{{hubba.selectedResource.url}}" href="{{hubba.selectedResource.path}}" target="_blank">
				{{hubba.selectedResource.path}}
			</a>
		</div>
		
		<form class="form" ng-submit="saveResource(hubba.selectedResource)" ng-if="hubba.$route.params.page == 'config'">

			<div class="form-group">
				<label for="resourceName">Name</label>
			    <input type="text" ng-model="hubba.selectedResource.name" class="form-control" id="resourceName" placeholder="Enter resource name" ng-change="determineResourceUrl(hubba.selectedResource);" required>
			</div>

			<div class="form-group">
				<label for="resourceType">Type</label>
			    <select ng-model="hubba.selectedResource.type" class="form-control" id="resourceType" ng-options="key as value.label for (key,value) in hubba.resourceTypes" required ng-change="typeChanged()"></select>
			</div>


			<div ng-repeat="(key,val) in hubba.resourceTypes[hubba.selectedResource.type].configuration" class="form-group">

				<label ng-if="val.inputType == 'text' || val.inputType == 'number' || val.inputType == 'select' || val.inputType == 'password'">{{key}}</label>
				<label ng-if="val.inputType == 'checkbox' || val.inputType == 'radio' && val.header">{{val.header}}</label>
				
				<input type="text" class="form-control" ng-model="hubba.selectedResource.configuration[key]" placeholder="{{val.placeholder}}" ng-if="val.inputType == 'text'" ng-required="val.required"/>
				
				<input type="password" class="form-control" ng-model="hubba.selectedResource.configuration[key]" placeholder="{{val.placeholder}}" ng-if="val.inputType == 'password'" ng-required="val.required"/>
				
				<input type="number" class="form-control" ng-model="hubba.selectedResource.configuration[key]" placeholder="{{val.placeholder}}" ng-if="val.inputType == 'number'" ng-required="val.required"/>
				
				<select  class="form-control" ng-if="val.inputType == 'select'" ng-multiple="val.multiple" ng-required="val.required" ng-model="hubba.selectedResource.configuration[key]">
					<option ng-repeat="o in val.options">{{o}}</option>
				</select>
				
				<div class="checkbox" ng-if="val.inputType=='checkbox' && !val.options">
					<label>
					    <input type="checkbox" ng-model="hubba.selectedResource.configuration[key]">
					    {{key}}
					</label>
				</div>
				
				<div ng-if="val.inputType=='radio'" >
					<div class="radio" ng-repeat="o in val.options">
					  <label>
					    <input type="radio" ng-model="hubba.selectedResource.configuration[key]" value="{{o}}">
					    {{o}}
					  </label>
					</div>
				</div>
				
			</div>
			<button type="submit" class="btn btn-default">Save</button>
		</form>

        <!--
		<div ng-if="hubba.$route.params.page && hubba.$route.params.page != 'config'">
			
			<div class="row">
				<div id="resource-tests" class="col-lg-4">
						<select ng-model="selectedTest" ng-options="test as test.name for test in tests | filter:{verb:hubba.$route.params.page}:false" ng-change="determineResourceUrl(hubba.selectedResource,selectedTest);" class="form-control">
						<option value="">Select a Test</option>
					</select>
					
					<div id="selected-test" ng-show="selectedTest">
						
						<h4>URL Parameters:</h4>
						<input type="text" class="form-control" ng-model="selectedTest.urlParam" ng-change="determineResourceUrl(hubba.selectedResource,selectedTest);"/>
						
						<br/>
						<h4>Query String Parameters:</h4>
						<table>
							<tr><th>Name</th><th>Value</th></tr>
							<tr ng-repeat="param in selectedTest.queryParams">
								<td><input class="form-control" type="text" ng-model="param.name" ng-change="determineResourceUrl(hubba.selectedResource,selectedTest);"/></td>
								<td><input class="form-control" type="text" ng-model="param.value" ng-change="determineResourceUrl(hubba.selectedResource,selectedTest);"/></td>
							</tr>
						</table>
						
						<br/>
						<div ng-if="selectedTest.verb == 'POST' || selectedTest.verb == 'PUT' || selectedTest.verb == 'PATCH'">
							<h4>Body JSON:</h4>
							<textarea class="form-control" style="width:100%;height:400px;">{{ selectedTest.body | json }}</textarea>
						</div>
						
						<br/>
						<h4>Headers:</h4>
						<table>
							<tr><th>Name</th><th>Value</th></tr>
							<tr ng-repeat="header in selectedTest.headers">
								<td><input class="form-control" type="text" ng-model="header.name"  ng-change="determineResourceUrl(hubba.selectedResource,selectedTest);"/></td>
								<td><input class="form-control" type="text" ng-model="header.value" ng-change="determineResourceUrl(hubba.selectedResource,selectedTest);"/></td>
							</tr>
						</table>
					</div>
					
				</div>
				
				<div id="resource-code" class="col-lg-4">
					<textarea class="form-control" style="width:100%;height:500px;">code...</textarea>
				</div>
				<div id="resource-output" class="col-lg-4">
					{
					<ul ng-if="selectedTest.expectedOutput" class="expected-object-tree">
						<li ng-repeat="(key,child) in selectedTest.expectedOutput">
							<ng-include src="'/hubba-admin/partials/expectedOutputTree.html'"></ng-include>
						</li>
					</ul>
					}
				</div>
			</div>
		</div>-->
		
	</div>
</div>




